<html data-reactroot=""><head><meta charset="utf-8"/><meta name="theme-color" content="#2B3A42"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Tree Shaking | webpack</title><meta name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:site_name" content="webpack"/><meta property="og:type" content="website"/><meta property="og:title" content="Tree Shaking | webpack"/><meta property="og:description" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:image" content="/aad9d51e01a0dcc2caf5bee43dc8e647.svg"/><meta property="twitter:card" content="summary"/><meta property="twitter:site" content="@webpack"/><meta property="twitter:creator" content="@webpack"/><meta property="twitter:domain" content="https://webpack.js.org/"/><link rel="icon" type="image/x-icon" href="/bc3effb418df77da9e04825c48a58a49.ico"/><link rel="stylesheet" href="/bb55d88c81f12177c5a5.css"/></head><body><div id="root"><div class="site"><div class="notification-bar"><div class="container notification-bar__inner"><p>Sponsor webpack and get apparel from the <a href="https://webpack.threadless.com">official shop</a>! All proceeds go to our <a href="https://opencollective.com/webpack">open collective</a>!</p></div></div><header class="navigation   "><section class="navigation__inner"><button class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="/"><img class="logo" src="/e0b5805d423a4ec9473ee315250968b2.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item navigation__item--active  " href="/concepts">Documentation</a><a class="navigation__item   " href="/contribute">Contribute</a><a class="navigation__item   " href="/vote">Vote</a><a href="https://medium.com/webpack" target="_blank" rel="noopener" class="navigation__item   ">Blog</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener" title="GitHub Repository" class="navigation__item   navigation__item--icon"><i aria-hidden="true" class="icon-github"></i></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener" title="Webpack on Stack Overflow" class="navigation__item   navigation__item--icon"><i aria-hidden="true" class="icon-stack-overflow"></i></a><span class="navigation__item   navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="/57c717e75066b659cfe19dc2a643153c.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/"><span>English</span></a></li><li><a href="https://webpack.docschina.org/"><span lang="zh">中文</span></a></li></ul></div></nav></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"></div></div></header><div class="container site__content"><div class="sponsors"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener" class="sponsors__content"><img src="/bf176a25b4f8227fea804854c98dc5e2.png"/><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" style="width:100px"/><div style="margin-top:1em;font-size:2em;text-align:center;color:#535353">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><a href="https://github.com/webpack/webpack/releases"><img alt="webpack shield" src="https://img.shields.io/npm/v/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600"/></a><div class="sidebar-item  sidebar-item--disabled"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title" href="/guides">Guides</a></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/installation">Installation</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Prerequisites"><a href="/guides/installation#prerequisites">Prerequisites</a></li><li class="sidebar-item__anchor" title="Local Installation"><a href="/guides/installation#local-installation">Local Installation</a></li><li class="sidebar-item__anchor" title="Global Installation"><a href="/guides/installation#global-installation">Global Installation</a></li><li class="sidebar-item__anchor" title="Bleeding Edge"><a href="/guides/installation#bleeding-edge">Bleeding Edge</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/getting-started">Getting Started</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Basic Setup"><a href="/guides/getting-started#basic-setup">Basic Setup</a></li><li class="sidebar-item__anchor" title="Creating a Bundle"><a href="/guides/getting-started#creating-a-bundle">Creating a Bundle</a></li><li class="sidebar-item__anchor" title="Modules"><a href="/guides/getting-started#modules">Modules</a></li><li class="sidebar-item__anchor" title="Using a Configuration"><a href="/guides/getting-started#using-a-configuration">Using a Configuration</a></li><li class="sidebar-item__anchor" title="NPM Scripts"><a href="/guides/getting-started#npm-scripts">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/getting-started#conclusion">Conclusion</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/asset-management">Asset Management</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Setup"><a href="/guides/asset-management#setup">Setup</a></li><li class="sidebar-item__anchor" title="Loading CSS"><a href="/guides/asset-management#loading-css">Loading CSS</a></li><li class="sidebar-item__anchor" title="Loading Images"><a href="/guides/asset-management#loading-images">Loading Images</a></li><li class="sidebar-item__anchor" title="Loading Fonts"><a href="/guides/asset-management#loading-fonts">Loading Fonts</a></li><li class="sidebar-item__anchor" title="Loading Data"><a href="/guides/asset-management#loading-data">Loading Data</a></li><li class="sidebar-item__anchor" title="Global Assets"><a href="/guides/asset-management#global-assets">Global Assets</a></li><li class="sidebar-item__anchor" title="Wrapping up"><a href="/guides/asset-management#wrapping-up">Wrapping up</a></li><li class="sidebar-item__anchor" title="Next guide"><a href="/guides/asset-management#next-guide">Next guide</a></li><li class="sidebar-item__anchor" title="Further Reading"><a href="/guides/asset-management#further-reading">Further Reading</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/output-management">Output Management</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Preparation"><a href="/guides/output-management#preparation">Preparation</a></li><li class="sidebar-item__anchor" title="Setting up HtmlWebpackPlugin"><a href="/guides/output-management#setting-up-htmlwebpackplugin">Setting up HtmlWebpackPlugin</a></li><li class="sidebar-item__anchor" title="Cleaning up the "><a href="/guides/output-management#cleaning-up-the-dist-folder">Cleaning up the </a></li><li class="sidebar-item__anchor" title="The Manifest"><a href="/guides/output-management#the-manifest">The Manifest</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/output-management#conclusion">Conclusion</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/development">Development</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Using source maps"><a href="/guides/development#using-source-maps">Using source maps</a></li><li class="sidebar-item__anchor" title="Choosing a Development Tool"><a href="/guides/development#choosing-a-development-tool">Choosing a Development Tool</a></li><li class="sidebar-item__anchor" title="Using Watch Mode"><a href="/guides/development#using-watch-mode">Using Watch Mode</a></li><li class="sidebar-item__anchor" title="Using webpack-dev-server"><a href="/guides/development#using-webpack-dev-server">Using webpack-dev-server</a></li><li class="sidebar-item__anchor" title="Using webpack-dev-middleware"><a href="/guides/development#using-webpack-dev-middleware">Using webpack-dev-middleware</a></li><li class="sidebar-item__anchor" title="Adjusting Your Text Editor"><a href="/guides/development#adjusting-your-text-editor">Adjusting Your Text Editor</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/development#conclusion">Conclusion</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/hot-module-replacement">Hot Module Replacement</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Enabling HMR"><a href="/guides/hot-module-replacement#enabling-hmr">Enabling HMR</a></li><li class="sidebar-item__anchor" title="Via the Node.js API"><a href="/guides/hot-module-replacement#via-the-nodejs-api">Via the Node.js API</a></li><li class="sidebar-item__anchor" title="Gotchas"><a href="/guides/hot-module-replacement#gotchas">Gotchas</a></li><li class="sidebar-item__anchor" title="HMR with Stylesheets"><a href="/guides/hot-module-replacement#hmr-with-stylesheets">HMR with Stylesheets</a></li><li class="sidebar-item__anchor" title="Other Code and Frameworks"><a href="/guides/hot-module-replacement#other-code-and-frameworks">Other Code and Frameworks</a></li></ul></div><div class="sidebar-item sidebar-item--open "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/tree-shaking">Tree Shaking</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Add a Utility"><a href="/guides/tree-shaking#add-a-utility">Add a Utility</a></li><li class="sidebar-item__anchor" title="Mark the file as side-effect-free"><a href="/guides/tree-shaking#mark-the-file-as-side-effect-free">Mark the file as side-effect-free</a></li><li class="sidebar-item__anchor" title="Minify the Output"><a href="/guides/tree-shaking#minify-the-output">Minify the Output</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/tree-shaking#conclusion">Conclusion</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/production">Production</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Setup"><a href="/guides/production#setup">Setup</a></li><li class="sidebar-item__anchor" title="NPM Scripts"><a href="/guides/production#npm-scripts">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Specify the Mode"><a href="/guides/production#specify-the-mode">Specify the Mode</a></li><li class="sidebar-item__anchor" title="Minification"><a href="/guides/production#minification">Minification</a></li><li class="sidebar-item__anchor" title="Source Mapping"><a href="/guides/production#source-mapping">Source Mapping</a></li><li class="sidebar-item__anchor" title="Minimize CSS"><a href="/guides/production#minimize-css">Minimize CSS</a></li><li class="sidebar-item__anchor" title="CLI Alternatives"><a href="/guides/production#cli-alternatives">CLI Alternatives</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/code-splitting">Code Splitting</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Entry Points"><a href="/guides/code-splitting#entry-points">Entry Points</a></li><li class="sidebar-item__anchor" title="Prevent Duplication"><a href="/guides/code-splitting#prevent-duplication">Prevent Duplication</a></li><li class="sidebar-item__anchor" title="Dynamic Imports"><a href="/guides/code-splitting#dynamic-imports">Dynamic Imports</a></li><li class="sidebar-item__anchor" title="Prefetching/Preloading modules"><a href="/guides/code-splitting#prefetchingpreloading-modules">Prefetching/Preloading modules</a></li><li class="sidebar-item__anchor" title="Bundle Analysis"><a href="/guides/code-splitting#bundle-analysis">Bundle Analysis</a></li><li class="sidebar-item__anchor" title="Next Steps"><a href="/guides/code-splitting#next-steps">Next Steps</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/lazy-loading">Lazy Loading</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Example"><a href="/guides/lazy-loading#example">Example</a></li><li class="sidebar-item__anchor" title="Frameworks"><a href="/guides/lazy-loading#frameworks">Frameworks</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/caching">Caching</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Output Filenames"><a href="/guides/caching#output-filenames">Output Filenames</a></li><li class="sidebar-item__anchor" title="Extracting Boilerplate"><a href="/guides/caching#extracting-boilerplate">Extracting Boilerplate</a></li><li class="sidebar-item__anchor" title="Module Identifiers"><a href="/guides/caching#module-identifiers">Module Identifiers</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/caching#conclusion">Conclusion</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/author-libraries">Authoring Libraries</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Authoring a Library"><a href="/guides/author-libraries#authoring-a-library">Authoring a Library</a></li><li class="sidebar-item__anchor" title="Base Configuration"><a href="/guides/author-libraries#base-configuration">Base Configuration</a></li><li class="sidebar-item__anchor" title="Externalize Lodash"><a href="/guides/author-libraries#externalize-lodash">Externalize Lodash</a></li><li class="sidebar-item__anchor" title="External Limitations"><a href="/guides/author-libraries#external-limitations">External Limitations</a></li><li class="sidebar-item__anchor" title="Expose the Library"><a href="/guides/author-libraries#expose-the-library">Expose the Library</a></li><li class="sidebar-item__anchor" title="Final Steps"><a href="/guides/author-libraries#final-steps">Final Steps</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/shimming">Shimming</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Shimming Globals"><a href="/guides/shimming#shimming-globals">Shimming Globals</a></li><li class="sidebar-item__anchor" title="Granular Shimming"><a href="/guides/shimming#granular-shimming">Granular Shimming</a></li><li class="sidebar-item__anchor" title="Global Exports"><a href="/guides/shimming#global-exports">Global Exports</a></li><li class="sidebar-item__anchor" title="Loading Polyfills"><a href="/guides/shimming#loading-polyfills">Loading Polyfills</a></li><li class="sidebar-item__anchor" title="Further Optimizations"><a href="/guides/shimming#further-optimizations">Further Optimizations</a></li><li class="sidebar-item__anchor" title="Node Built-Ins"><a href="/guides/shimming#node-built-ins">Node Built-Ins</a></li><li class="sidebar-item__anchor" title="Other Utilities"><a href="/guides/shimming#other-utilities">Other Utilities</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/progressive-web-application">Progressive Web Application</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="We Don&#x27;t Work Offline Now"><a href="/guides/progressive-web-application#we-dont-work-offline-now">We Don&#x27;t Work Offline Now</a></li><li class="sidebar-item__anchor" title="Adding Workbox"><a href="/guides/progressive-web-application#adding-workbox">Adding Workbox</a></li><li class="sidebar-item__anchor" title="Registering Our Service Worker"><a href="/guides/progressive-web-application#registering-our-service-worker">Registering Our Service Worker</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/progressive-web-application#conclusion">Conclusion</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/typescript">TypeScript</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Basic Setup"><a href="/guides/typescript#basic-setup">Basic Setup</a></li><li class="sidebar-item__anchor" title="Loader"><a href="/guides/typescript#loader">Loader</a></li><li class="sidebar-item__anchor" title="Source Maps"><a href="/guides/typescript#source-maps">Source Maps</a></li><li class="sidebar-item__anchor" title="Using Third Party Libraries"><a href="/guides/typescript#using-third-party-libraries">Using Third Party Libraries</a></li><li class="sidebar-item__anchor" title="Importing Other Assets"><a href="/guides/typescript#importing-other-assets">Importing Other Assets</a></li><li class="sidebar-item__anchor" title="Build Performance"><a href="/guides/typescript#build-performance">Build Performance</a></li></ul></div><div class="sidebar-item  sidebar-item--disabled"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title" href="/guides/environment-variables">Environment Variables</a></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/build-performance">Build Performance</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="General"><a href="/guides/build-performance#general">General</a></li><li class="sidebar-item__anchor" title="Stay Up to Date"><a href="/guides/build-performance#stay-up-to-date">Stay Up to Date</a></li><li class="sidebar-item__anchor" title="Loaders"><a href="/guides/build-performance#loaders">Loaders</a></li><li class="sidebar-item__anchor" title="Bootstrap"><a href="/guides/build-performance#bootstrap">Bootstrap</a></li><li class="sidebar-item__anchor" title="Resolving"><a href="/guides/build-performance#resolving">Resolving</a></li><li class="sidebar-item__anchor" title="Dlls"><a href="/guides/build-performance#dlls">Dlls</a></li><li class="sidebar-item__anchor" title="Smaller = Faster"><a href="/guides/build-performance#smaller--faster">Smaller = Faster</a></li><li class="sidebar-item__anchor" title="Worker Pool"><a href="/guides/build-performance#worker-pool">Worker Pool</a></li><li class="sidebar-item__anchor" title="Persistent cache"><a href="/guides/build-performance#persistent-cache">Persistent cache</a></li><li class="sidebar-item__anchor" title="Custom plugins/loaders"><a href="/guides/build-performance#custom-pluginsloaders">Custom plugins/loaders</a></li><li class="sidebar-item__anchor" title="Development"><a href="/guides/build-performance#development">Development</a></li><li class="sidebar-item__anchor" title="Incremental Builds"><a href="/guides/build-performance#incremental-builds">Incremental Builds</a></li><li class="sidebar-item__anchor" title="Compile in Memory"><a href="/guides/build-performance#compile-in-memory">Compile in Memory</a></li><li class="sidebar-item__anchor" title="stats.toJson speed"><a href="/guides/build-performance#statstojson-speed">stats.toJson speed</a></li><li class="sidebar-item__anchor" title="Devtool"><a href="/guides/build-performance#devtool">Devtool</a></li><li class="sidebar-item__anchor" title="Avoid Production Specific Tooling"><a href="/guides/build-performance#avoid-production-specific-tooling">Avoid Production Specific Tooling</a></li><li class="sidebar-item__anchor" title="Minimal Entry Chunk"><a href="/guides/build-performance#minimal-entry-chunk">Minimal Entry Chunk</a></li><li class="sidebar-item__anchor" title="Avoid Extra Optimization Steps"><a href="/guides/build-performance#avoid-extra-optimization-steps">Avoid Extra Optimization Steps</a></li><li class="sidebar-item__anchor" title="Output Without Path Info"><a href="/guides/build-performance#output-without-path-info">Output Without Path Info</a></li><li class="sidebar-item__anchor" title="Node.js Version"><a href="/guides/build-performance#nodejs-version">Node.js Version</a></li><li class="sidebar-item__anchor" title="TypeScript Loader"><a href="/guides/build-performance#typescript-loader">TypeScript Loader</a></li><li class="sidebar-item__anchor" title="Production"><a href="/guides/build-performance#production">Production</a></li><li class="sidebar-item__anchor" title="Multiple Compilations"><a href="/guides/build-performance#multiple-compilations">Multiple Compilations</a></li><li class="sidebar-item__anchor" title="Source Maps"><a href="/guides/build-performance#source-maps">Source Maps</a></li><li class="sidebar-item__anchor" title="Specific Tooling Issues"><a href="/guides/build-performance#specific-tooling-issues">Specific Tooling Issues</a></li><li class="sidebar-item__anchor" title="Babel"><a href="/guides/build-performance#babel">Babel</a></li><li class="sidebar-item__anchor" title="TypeScript"><a href="/guides/build-performance#typescript">TypeScript</a></li><li class="sidebar-item__anchor" title="Sass"><a href="/guides/build-performance#sass">Sass</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/csp">Content Security Policies</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Examples"><a href="/guides/csp#examples">Examples</a></li><li class="sidebar-item__anchor" title="Enabling CSP"><a href="/guides/csp#enabling-csp">Enabling CSP</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/development-vagrant">Development - Vagrant</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Configuring the Project"><a href="/guides/development-vagrant#configuring-the-project">Configuring the Project</a></li><li class="sidebar-item__anchor" title="Running the Server"><a href="/guides/development-vagrant#running-the-server">Running the Server</a></li><li class="sidebar-item__anchor" title="Advanced Usage with nginx"><a href="/guides/development-vagrant#advanced-usage-with-nginx">Advanced Usage with nginx</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/development-vagrant#conclusion">Conclusion</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/dependency-management">Dependency Management</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="require with expression"><a href="/guides/dependency-management#require-with-expression">require with expression</a></li><li class="sidebar-item__anchor" title="require.context"><a href="/guides/dependency-management#requirecontext">require.context</a></li><li class="sidebar-item__anchor" title="context module API"><a href="/guides/dependency-management#context-module-api">context module API</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/public-path">Public Path</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Use Cases"><a href="/guides/public-path#use-cases">Use Cases</a></li><li class="sidebar-item__anchor" title="Environment Based"><a href="/guides/public-path#environment-based">Environment Based</a></li><li class="sidebar-item__anchor" title="On The Fly"><a href="/guides/public-path#on-the-fly">On The Fly</a></li></ul></div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/integrations">Integrations</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="NPM Scripts"><a href="/guides/integrations#npm-scripts">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Grunt"><a href="/guides/integrations#grunt">Grunt</a></li><li class="sidebar-item__anchor" title="Gulp"><a href="/guides/integrations#gulp">Gulp</a></li><li class="sidebar-item__anchor" title="Mocha"><a href="/guides/integrations#mocha">Mocha</a></li><li class="sidebar-item__anchor" title="Karma"><a href="/guides/integrations#karma">Karma</a></li></ul></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="https://github.com/webpack/webpack.js.org/edit/master/src/content/guides/tree-shaking.md">Edit Document<i class="page-links__icon icon-edit"></i></a></div><div class="markdown"><h1>Tree Shaking</h1><div><p><em>Tree shaking</em> is a term commonly used in the JavaScript context for dead-code elimination. It relies on the <a href="http://exploringjs.com/es6/ch_modules.html#static-module-structure">static structure</a> of ES2015 module syntax, i.e. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"><code>export</code></a>. The name and concept have been popularized by the ES2015 module bundler <a href="https://github.com/rollup/rollup">rollup</a>.</p>
<p>The webpack 2 release came with built-in support for ES2015 modules (alias <em>harmony modules</em>) as well as unused module export detection. The new webpack 4 release expands on this capability with a way to provide hints to the compiler via the <code>"sideEffects"</code> <code>package.json</code> property to denote which files in your project are "pure" and therefore safe to prune if unused.</p>
<blockquote class="tip">
<p>The remainder of this guide will stem from <a href="/guides/getting-started">Getting Started</a>. If you haven't read through that guide already, please do so now.</p>
</blockquote>
<h2 id="add-a-utility">Add a Utility<a href="#add-a-utility" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's add a new utility file to our project, <code>src/math.js</code>, that exports two functions:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
  |- bundle.js
  |- index.html
|- /src
  |- index.js
<span class="token inserted">+ |- math.js</span>
|- /node_modules</code></pre>
<p><strong>src/math.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Set the <code>mode</code> configuration option to <a href="/concepts/mode/#mode-development">development</a> to make sure that the bundle is not minified:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist')
<span class="token deleted">- }</span>
<span class="token inserted">+ },</span>
<span class="token inserted">+ mode: 'development',</span>
<span class="token inserted">+ optimization: {</span>
<span class="token inserted">+   usedExports: true</span>
<span class="token inserted">+ }</span>
};</code></pre>
<p>With that in place, let's update our entry script to utilize one of these new methods and remove <code>lodash</code> for simplicity:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted">- import _ from 'lodash';</span>
<span class="token inserted">+ import { cube } from './math.js';</span>

  function component() {
<span class="token deleted">-   var element = document.createElement('div');</span>
<span class="token inserted">+   var element = document.createElement('pre');</span>

<span class="token deleted">-   // Lodash, now imported by this script</span>
<span class="token deleted">-   element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
<span class="token inserted">+   element.innerHTML = [</span>
<span class="token inserted">+     'Hello webpack!',</span>
<span class="token inserted">+     '5 cubed is equal to ' + cube(5)</span>
<span class="token inserted">+   ].join('\n\n');</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p>Note that we <strong>did not <code>import</code> the <code>square</code> method</strong> from the <code>src/math.js</code> module. That function is what's known as "dead code", meaning an unused <code>export</code> that should be dropped. Now let's run our npm script, <code>npm run build</code>, and inspect the output bundle:</p>
<p><strong>dist/bundle.js (around lines 90 - 100)</strong></p>
<pre><code class="hljs language-js"><span class="token comment">/* 1 */</span>
<span class="token comment">/***/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> __webpack_exports__<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span><span class="token punctuation">;</span>
  <span class="token comment">/* unused harmony export square */</span>
  <span class="token comment">/* harmony export (immutable) */</span> __webpack_exports__<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> cube<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Note the <code>unused harmony export square</code> comment above. If you look at the code below it, you'll notice that <code>square</code> is not being imported, however, it is still included in the bundle. We'll fix that in the next section.</p>
<h2 id="mark-the-file-as-side-effect-free">Mark the file as side-effect-free<a href="#mark-the-file-as-side-effect-free" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>In a 100% ESM module world, identifying side effects is straightforward. However, we aren't there just yet, so in the mean time it's necessary to provide hints to webpack's compiler on the "pureness" of your code.</p>
<p>The way this is accomplished is the <code>"sideEffects"</code> package.json property.</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"your-project"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre>
<p>All the code noted above does not contain side effects, so we can simply mark the property as <code>false</code> to inform webpack that it can safely prune unused exports.</p>
<blockquote class="tip">
<p>A "side effect" is defined as code that performs a special behavior when imported, other than exposing one or more exports. An example of this are polyfills, which affect the global scope and usually do not provide an export.</p>
</blockquote>
<p>If your code did have some side effects though, an array can be provided instead:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"your-project"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./src/some-side-effectful-file.js"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>The array accepts relative, absolute, and glob patterns to the relevant files. It uses <a href="https://github.com/micromatch/micromatch#matching-features">micromatch</a> under the hood.</p>
<blockquote class="tip">
<p>Note that any imported file is subject to tree shaking. This means if you use something like <code>css-loader</code> in your project and import a CSS file, it needs to be added to the side effect list so it will not be unintentionally dropped in production mode:</p>
</blockquote>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"your-project"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./src/some-side-effectful-file.js"</span><span class="token punctuation">,</span>
    <span class="token string">"*.css"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>Finally, <code>"sideEffects"</code> can also be set from the <a href="/configuration/module/#module-rules"><code>module.rules</code> configuration option</a>.</p>
<h2 id="minify-the-output">Minify the Output<a href="#minify-the-output" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>So we've cued up our "dead code" to be dropped by using the <code>import</code> and <code>export</code> syntax, but we still need to drop it from the bundle. To do that set the <code>mode</code> configuration option to <a href="/concepts/mode/#mode-production"><code>production</code></a> configuration option.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist')
  },
<span class="token deleted">- mode: 'development',</span>
<span class="token deleted">- optimization: {</span>
<span class="token deleted">-   usedExports: true</span>
<span class="token deleted">- }</span>
<span class="token inserted">+ mode: 'production'</span>
};</code></pre>
<blockquote class="tip">
<p>Note that the <code>--optimize-minimize</code> flag can be used to enable <code>TerserPlugin</code> as well.</p>
</blockquote>
<p>With that squared away, we can run another <code>npm run build</code> and see if anything has changed.</p>
<p>Notice anything different about <code>dist/bundle.js</code>? Clearly the whole bundle is now minified and mangled, but, if you look carefully, you won't see the <code>square</code> function included but will see a mangled version of the <code>cube</code> function (<code>function r(e){return e*e*e}n.a=r</code>). With minification and tree shaking our bundle is now a few bytes smaller! While that may not seem like much in this contrived example, tree shaking can yield a significant decrease in bundle size when working on larger applications with complex dependency trees.</p>
<blockquote class="tip">
<p><a href="/plugins/module-concatenation-plugin">ModuleConcatenationPlugin</a> is needed for the tree shaking to work. It is added by <code>mode: "production"</code>. If you are not using it, remember to add the <a href="/plugins/module-concatenation-plugin">ModuleConcatenationPlugin</a> manually.</p>
</blockquote>
<h2 id="conclusion">Conclusion<a href="#conclusion" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>So, what we've learned is that in order to take advantage of <em>tree shaking</em>, you must...</p>
<ul>
<li>Use ES2015 module syntax (i.e. <code>import</code> and <code>export</code>).</li>
<li>Ensure no compilers transform your ES2015 module syntax into CommonJS modules (this is the default behavior of popular Babel preset @babel/preset-env - see <a href="https://babeljs.io/docs/en/babel-preset-env#modules">documentation</a> for more details).</li>
<li>Add a <code>"sideEffects"</code> property to your project's <code>package.json</code> file.</li>
<li>Use <a href="/concepts/mode/#mode-production"><code>production</code></a> <code>mode</code> configuration option to enable <a href="/concepts/mode/#usage">various optimizations</a> including minification and tree shaking.</li>
</ul>
<p>You can imagine your application as a tree. The source code and libraries you actually use represent the green, living leaves of the tree. Dead code represents the brown, dead leaves of the tree that are consumed by autumn. In order to get rid of the dead leaves, you have to shake the tree, causing them to fall.</p>
<p>If you are interested in more ways to optimize your output, please jump to the next guide for details on building for <a href="/guides/production">production</a>.</p>
</div><div><hr/><h3>Further Reading</h3><ul><li><a href="https://medium.com/webpack/webpack-4-beta-try-it-today-6b1d27d7d7e2#9a67">webpack 4 beta — try it today!</a></li><li><a href="https://webpack.js.org/plugins/module-concatenation-plugin/#debugging-optimization-bailouts">Debugging Optimization Bailouts</a></li><li><a href="https://github.com/webpack/webpack/issues/6074">Issue 6074 - Add support for more complex selectors for sideEffects</a></li></ul></div><div><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="https://github.com/simon04"><img alt="simon04" src="https://github.com/simon04.png?size=90"/><span class="contributor__name"> <!-- -->simon04</span></a><a class="contributor" href="https://github.com/zacanger"><img alt="zacanger" src="https://github.com/zacanger.png?size=90"/><span class="contributor__name"> <!-- -->zacanger</span></a><a class="contributor" href="https://github.com/alexjoverm"><img alt="alexjoverm" src="https://github.com/alexjoverm.png?size=90"/><span class="contributor__name"> <!-- -->alexjoverm</span></a><a class="contributor" href="https://github.com/avant1"><img alt="avant1" src="https://github.com/avant1.png?size=90"/><span class="contributor__name"> <!-- -->avant1</span></a><a class="contributor" href="https://github.com/MijaelWatts"><img alt="MijaelWatts" src="https://github.com/MijaelWatts.png?size=90"/><span class="contributor__name"> <!-- -->MijaelWatts</span></a><a class="contributor" href="https://github.com/dmitriid"><img alt="dmitriid" src="https://github.com/dmitriid.png?size=90"/><span class="contributor__name"> <!-- -->dmitriid</span></a><a class="contributor" href="https://github.com/probablyup"><img alt="probablyup" src="https://github.com/probablyup.png?size=90"/><span class="contributor__name"> <!-- -->probablyup</span></a><a class="contributor" href="https://github.com/gish"><img alt="gish" src="https://github.com/gish.png?size=90"/><span class="contributor__name"> <!-- -->gish</span></a><a class="contributor" href="https://github.com/lumo10"><img alt="lumo10" src="https://github.com/lumo10.png?size=90"/><span class="contributor__name"> <!-- -->lumo10</span></a><a class="contributor" href="https://github.com/byzyk"><img alt="byzyk" src="https://github.com/byzyk.png?size=90"/><span class="contributor__name"> <!-- -->byzyk</span></a><a class="contributor" href="https://github.com/pnevares"><img alt="pnevares" src="https://github.com/pnevares.png?size=90"/><span class="contributor__name"> <!-- -->pnevares</span></a><a class="contributor" href="https://github.com/EugeneHlushko"><img alt="EugeneHlushko" src="https://github.com/EugeneHlushko.png?size=90"/><span class="contributor__name"> <!-- -->EugeneHlushko</span></a><a class="contributor" href="https://github.com/torifat"><img alt="torifat" src="https://github.com/torifat.png?size=90"/><span class="contributor__name"> <!-- -->torifat</span></a></div></div></div></div></section><div class="gitter"><div class="gitter__button"><i class="gitter__icon icon-gitter"></i></div></div></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">Get Started</a><a class="footer__link" href="/organization/">Organization</a><a class="footer__link" href="/starter-kits/">Starter Kits</a><a class="footer__link" href="/comparison/">Comparison</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" alt="webpack icon"/></a></section><section class="footer__right"><a class="footer__link" href="/glossary/">Glossary</a><a class="footer__link" href="/branding/">Branding</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener" class="footer__link">Changelog</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/7052446b5e67df4434f4031afd2f1497.svg"/><img alt="Creative Commons License" src="/7ebb1b3901ce119694f65e04f6347ef5.svg"/></a></section></div></footer></div></div><script src="/vendor.bundle.js"></script><script src="/index.bundle.js"></script></body></html>